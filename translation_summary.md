# 国际化（i18n）修复与重构任务清单 (实时更新)

**最后更新时间:** 2025年9月5日

## 总体状态

- [x] **阶段一：核心框架修复** - 已全部完成。
- [ ] **阶段二：界面组件国际化** - 进行中。
- [ ] **阶段三：验证与交付** - 待办。

---

## 详细任务列表

### 阶段一：核心框架修复 (已完成)
- [x] **诊断与分析**
  - [x] 分析 `translation_summary.md`，确认其与实际情况不符。
  - [x] 分析 `i18n.ts`，发现启动语言硬编码问题。
  - [x] 对比 `en` 和 `zh` 翻译文件，发现中文翻译严重不完整。
  - [x] 分析 `main.tsx`，发现未包裹 `I18nextProvider` 的致命错误。
  - [x] 抽查 `App.tsx` 和 `Settings.tsx`，发现大量硬编码字符串。
- [x] **框架修复**
  - [x] **`main.tsx`**: 使用 `<I18nextProvider>` 包裹根组件，打通 i18n 上下文。
  - [x] **`i18n.ts`**: 修改初始化逻辑，从 `localStorage` 读取语言偏好，实现设置持久化。

### 阶段二：界面组件国际化 (进行中)

此阶段的目标是将所有面向用户的硬编码字符串替换为 `t('key')` 的形式，并补全中英文翻译。

- [x] **`App.tsx` (主应用入口)**
  - [x] 替换组件内所有硬编码字符串。
  - [x] 在 `en/translation.json` 和 `zh/translation.json` 中添加对应翻译。
- [x] **`Settings.tsx` (设置页面)**
  - [x] **通用**选项卡：完成所有文本替换和翻译键添加。
  - [x] **权限**选项卡：完成所有文本替换和翻译键添加。
  - [x] **环境变量**选项卡：完成所有文本替换和翻译键添加。
  - [x] **高级**选项卡：完成所有文本替换和翻译键添加。
  - [x] **钩子**选项卡：完成所有文本替换和翻译键添加。
- [x] **`SlashCommandsManager.tsx` (命令管理)**
  - [x] **头部与筛选器**：完成所有文本替换和翻译键添加。
  - [x] **空状态提示**：完成所有文本替换和翻译键添加。
  - [x] **命令列表**：完成所有文本替换和翻译键添加。
  - [x] **编辑对话框**：完成所有文本替换和翻译键添加。
  - [x] **删除对话框**：完成所有文本替换和翻译键添加。
- [ ] **`StorageTab.tsx` (存储页面)**
  - [x] **头部与表格选择器**：已完成文本替换和翻译键添加。
  - [x] **表格区域**：已完成。
  - [x] **分页组件**：已完成。
  - [x] **编辑/新增/删除/重置等所有对话框**：已完成。
- [x] **`ProxySettings.tsx` (代理设置页面)**
  - [x] 扫描并替换所有硬编码字符串。
  - [x] 添加对应翻译键。
- [ ] **其他组件 (待扫描)**
  - [x] `ProjectList.tsx`
  - [x] `NFOCredits.tsx`
  - [x] `CustomTitlebar.tsx`
  - [ ] ... (后续将继续扫描并添加其他组件)

### 阶段三：验证与交付 (待办)
- [ ] **功能验证**
  - [ ] 运行应用，在设置中切换语言，验证所有已修改界面的文本是否正确切换。
  - [ ] 刷新页面，验证语言选择是否被正确保留。
- [ ] **文档更新**
  - [ ] 最终确认此 `translation_summary.md` 文件内容准确无误。
  - [ ] 提交最终的工作总结。
